{"version":3,"file":"divi-video-post.min.js","mappings":"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","sources":["webpack://divi-video-post/webpack/bootstrap","webpack://divi-video-post/webpack/runtime/compat get default export","webpack://divi-video-post/webpack/runtime/define property getters","webpack://divi-video-post/webpack/runtime/hasOwnProperty shorthand","webpack://divi-video-post/external var \"React\"","webpack://divi-video-post/./modules/VideoEmbed/VideoEmbed.jsx","webpack://divi-video-post/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = React;","// VideoEmbed.jsx — Divi Builder React component for the Video Embed module.\n\nimport React, { Component } from 'react';\n\nconst { __ } = window.wp?.i18n ?? { __: ( s ) => s };\n\n/**\n * Parse a YouTube or Vimeo URL and return { platform, id }.\n */\nfunction parseVideoUrl( url = '' ) {\n\turl = url.trim();\n\n\t// YouTube: watch?v=\n\tlet match = url.match( /(?:youtube\\.com\\/watch\\?(?:[^&]*&)*v=)([a-zA-Z0-9_\\-]{11})/ );\n\tif ( match ) return { platform: 'youtube', id: match[1] };\n\n\t// YouTube: youtu.be/\n\tmatch = url.match( /youtu\\.be\\/([a-zA-Z0-9_\\-]{11})/ );\n\tif ( match ) return { platform: 'youtube', id: match[1] };\n\n\t// YouTube: embed/\n\tmatch = url.match( /youtube\\.com\\/embed\\/([a-zA-Z0-9_\\-]{11})/ );\n\tif ( match ) return { platform: 'youtube', id: match[1] };\n\n\t// Vimeo: player.vimeo.com/video/\n\tmatch = url.match( /player\\.vimeo\\.com\\/video\\/(\\d+)/ );\n\tif ( match ) return { platform: 'vimeo', id: match[1] };\n\n\t// Vimeo: vimeo.com/ID\n\tmatch = url.match( /vimeo\\.com\\/(\\d+)(?:[?\\/]|$)/ );\n\tif ( match ) return { platform: 'vimeo', id: match[1] };\n\n\treturn { platform: 'unknown', id: '' };\n}\n\n/**\n * Build the embed URL from platform + id.\n */\nfunction buildEmbedUrl( platform, id ) {\n\tif ( 'youtube' === platform ) {\n\t\treturn `https://www.youtube.com/embed/${ encodeURIComponent( id ) }?rel=0`;\n\t}\n\tif ( 'vimeo' === platform ) {\n\t\treturn `https://player.vimeo.com/video/${ encodeURIComponent( id ) }`;\n\t}\n\treturn '';\n}\n\n/**\n * Map ratio prop value to CSS class.\n */\nfunction ratioClass( ratio ) {\n\tconst map = {\n\t\t'16:9': 'dvp-ratio-16x9',\n\t\t'4:3':  'dvp-ratio-4x3',\n\t\t'1:1':  'dvp-ratio-1x1',\n\t};\n\treturn map[ ratio ] ?? 'dvp-ratio-16x9';\n}\n\nclass VideoEmbed extends Component {\n\tstatic slug = 'et_pb_video_embed';\n\n\trender() {\n\t\tconst {\n\t\t\tvideo_mode       = 'dynamic',\n\t\t\tmanual_video_url = '',\n\t\t\tvideo_ratio      = '16:9',\n\t\t} = this.props;\n\n\t\tconst wrapperStyle = {\n\t\t\tposition:   'relative',\n\t\t\twidth:      '100%',\n\t\t\toverflow:   'hidden',\n\t\t};\n\n\t\tconst iframeStyle = {\n\t\t\tposition: 'absolute',\n\t\t\ttop:      0,\n\t\t\tleft:     0,\n\t\t\twidth:    '100%',\n\t\t\theight:   '100%',\n\t\t\tborder:   0,\n\t\t};\n\n\t\t// Dynamic mode — cannot resolve post meta inside the builder.\n\t\tif ( 'dynamic' === video_mode ) {\n\t\t\treturn (\n\t\t\t\t<div className={ `dvp-video-wrapper ${ ratioClass( video_ratio ) } dvp-builder-placeholder` }\n\t\t\t\t\tstyle={ { ...wrapperStyle, minHeight: '180px', background: '#1a1a1a', display: 'flex', alignItems: 'center', justifyContent: 'center' } }>\n\t\t\t\t\t<p style={ { color: '#fff', textAlign: 'center', padding: '1em', margin: 0 } }>\n\t\t\t\t\t\t{ __( 'Video will load from post meta on the frontend.', 'divi-video-post' ) }\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t// Manual mode — render a live preview if a valid URL is provided.\n\t\tif ( 'manual' === video_mode ) {\n\t\t\tconst { platform, id } = parseVideoUrl( manual_video_url );\n\t\t\tconst embedUrl = buildEmbedUrl( platform, id );\n\n\t\t\tif ( ! embedUrl ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ `dvp-video-wrapper ${ ratioClass( video_ratio ) } dvp-builder-placeholder` }\n\t\t\t\t\t\tstyle={ { ...wrapperStyle, minHeight: '180px', background: '#1a1a1a', display: 'flex', alignItems: 'center', justifyContent: 'center' } }>\n\t\t\t\t\t\t<p style={ { color: '#aaa', textAlign: 'center', padding: '1em', margin: 0 } }>\n\t\t\t\t\t\t\t{ __( 'Enter a valid YouTube or Vimeo URL above to preview the video.', 'divi-video-post' ) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={ `dvp-video-wrapper ${ ratioClass( video_ratio ) }` } style={ wrapperStyle }>\n\t\t\t\t\t<iframe\n\t\t\t\t\t\tsrc={ embedUrl }\n\t\t\t\t\t\tstyle={ iframeStyle }\n\t\t\t\t\t\tallowFullScreen\n\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\ttitle={ __( 'Video embed preview', 'divi-video-post' ) }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nexport default VideoEmbed;\n","/**\n * src/index.js — webpack entry point for the Divi Video Post extension.\n *\n * This file is compiled by webpack into build/divi-video-post.min.js, which\n * Divi's DiviExtension PHP class enqueues inside the Visual Builder context.\n *\n * It imports each module's React component and registers it with Divi so the\n * Visual Builder can render a live preview for the et_pb_video_embed module.\n *\n * How Divi module component registration works\n * --------------------------------------------\n * When the Visual Builder initialises it fires the custom event\n * `et_builder_api_ready` on `window`. At that point the global\n * `window.ETBuilderBackend` object and the React-based module registry are\n * available. We listen for that event and register each component by the\n * same slug that its corresponding PHP ET_Builder_Module class declares.\n *\n * If Divi ever changes the event name or registry API, only this file needs\n * to be updated — the module components themselves stay unchanged.\n */\n\nimport VideoEmbed from '../modules/VideoEmbed/VideoEmbed';\n\n/**\n * Register a single module component with the Divi Visual Builder.\n *\n * @param {Function} Component - React component class with a static `slug` property.\n */\nfunction registerModule( Component ) {\n\tif ( ! Component || ! Component.slug ) {\n\t\treturn;\n\t}\n\n\t// Primary path: ET Builder module registry (Divi 4.x Visual Builder).\n\tif (\n\t\twindow.ET_Builder &&\n\t\twindow.ET_Builder.api &&\n\t\twindow.ET_Builder.api.module &&\n\t\ttypeof window.ET_Builder.api.module.registerModule === 'function'\n\t) {\n\t\twindow.ET_Builder.api.module.registerModule( Component, null );\n\t\treturn;\n\t}\n\n\t// Legacy / alternative path used by some Divi 4 releases.\n\tif (\n\t\twindow.ETBuilderBackend &&\n\t\ttypeof window.ETBuilderBackend.registerModuleComponent === 'function'\n\t) {\n\t\twindow.ETBuilderBackend.registerModuleComponent( Component.slug, Component );\n\t\treturn;\n\t}\n\n\t// Fallback: expose on a namespaced global so a later script or Divi\n\t// itself can pick up the component.\n\twindow.DVPModules = window.DVPModules || {};\n\twindow.DVPModules[ Component.slug ] = Component;\n}\n\n/**\n * Run registration once the Divi Builder API is ready.\n *\n * Divi dispatches `et_builder_api_ready` on `window` before rendering the\n * canvas; that is the earliest safe moment to call register functions.\n */\nfunction onBuilderReady() {\n\tregisterModule( VideoEmbed );\n}\n\n// The event may already have fired if this script loads late (unlikely in\n// Divi's normal enqueue order, but handle it defensively).\nif ( window.ET_Builder && window.ET_Builder.api ) {\n\tonBuilderReady();\n} else {\n\twindow.addEventListener( 'et_builder_api_ready', onBuilderReady, { once: true } );\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","React","__","window","wp","i18n","s","ratioClass","ratio","VideoEmbed","Component","static","render","video_mode","manual_video_url","video_ratio","this","props","wrapperStyle","position","width","overflow","iframeStyle","top","left","height","border","className","style","minHeight","background","display","alignItems","justifyContent","color","textAlign","padding","margin","platform","id","url","match","trim","parseVideoUrl","embedUrl","encodeURIComponent","buildEmbedUrl","src","allowFullScreen","loading","title","onBuilderReady","slug","ET_Builder","api","registerModule","ETBuilderBackend","registerModuleComponent","DVPModules","addEventListener","once"],"sourceRoot":""}